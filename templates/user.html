{% extends "layout.html" %}

{% block title %}{{ user.username }}'s profile {% endblock %}

{% block body %}
<br>
<br>
<br>
<div class="container">
  <div class="row">
    <div class="twelve columns">
      <h1>{{ user.username }}'s Profile</h1>
      {% if loggedIn and session.username == "admin" %}
        <form action="{{ url_for('delete_user') }}" method="post">
          <input type="hidden" name="user_handle" value="{{ user.handle }}" />
          <button type="submit">Delete User</button>
        </form>
      {% endif %}

      {% if session['username'] != user.username %}
        <!-- Follow button -->
        <form action="{{ url_for('follow_user') }}" method="post">
          <input type="hidden" name="followingUsername" value="{{ user.username }}">
          <button type="submit">
            {% if is_following %}
              Unfollow
            {% else %}
              Follow
            {% endif %}
          </button>
        </form>
      {% endif %}
    </div>
  </div>

  <h2>Tweets</h2>
  <ul>
    {% for tweet in tweets %}
      <div class="tweet">
        <div class="tweet-username">
          <a href="/user/{{ tweet.userHandle }}">{{ tweet.username }}</a>&#160;&#160;
          <a href="/user/{{ tweet.userHandle }}" class="user-handle">@{{ tweet.userHandle }}</a>
        </div>
        <div class="tweet-content">
          <a href="/tweets/{{ tweet.id }}">{{ tweet.content|format_tweet }} {{ tweet.hashtag }}</a>
        </div>
      </div>
    {% endfor %}
  </ul>
</div>
{% endblock %}
